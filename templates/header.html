<!-- 统一页眉 -->
<div class="header">
    <div class="header-left" id="headerLeft">
        <!-- 左侧内容将由 JavaScript 动态渲染 -->
    </div>
    <div class="header-right" id="headerActions">
        <!-- 登录状态将由 JavaScript 动态渲染 -->
    </div>
</div>

<script>
    // 渲染页眉
    function renderHeader() {
        const headerLeft = document.getElementById('headerLeft');
        const headerActions = document.getElementById('headerActions');
        const user = getCurrentUser();

        // 检查是否为首页
        const isHomePage = window.location.pathname === '/' || window.location.pathname === '/index';

        // 渲染左侧内容
        if (!isHomePage) {
            headerLeft.innerHTML = '<a href="/" class="home-link"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg> 首页</a>';
        } else {
            headerLeft.innerHTML = '';
        }

        // 渲染右侧内容
        if (user) {
            // 已登录：显示用户信息和退出按钮
            headerActions.innerHTML = `
                <span class="user-info">${user.username} (${user.role === 'admin' ? '管理员' : '普通用户'})</span>
                <button class="logout-button" onclick="logout()" title="退出登录"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg></button>
            `;
        } else {
            // 未登录：显示登录按钮
            headerActions.innerHTML = `
                <a href="/login" class="login-button">登录</a>
            `;
        }
    }

    // 页面加载时渲染页眉
    document.addEventListener('DOMContentLoaded', function() {
        renderHeader();
    });
</script>