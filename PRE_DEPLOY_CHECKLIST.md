# 部署前最终检查清单

## 本地检查

### 1. 代码检查
- [x] 所有代码已提交到 Git
- [x] requirements.txt 已更新（包含所有依赖）
- [x] 数据库文件正常（rongzao.db）
- [x] 本地测试运行正常
- [x] 所有功能正常工作

### 2. 文件检查
- [x] app.py - Flask 主文件
- [x] database.py - 数据库连接
- [x] routes.py - 路由注册
- [x] config.py - 配置管理
- [x] utils.py - 工具函数
- [x] deploy.sh - 部署脚本
- [x] check_env.sh - 环境检查脚本
- [x] package_for_deploy.sh - 打包脚本
- [x] requirements.txt - 依赖列表
- [x] DEPLOYMENT.md - 部署文档

### 3. 数据库检查
- [x] rongzao.db 文件存在
- [x] 数据库大小: 4.7MB
- [x] 包含必要的表:
  - [x] OrderDetails
  - [x] ProductInfo
  - [x] CategoryInfo
- [x] ProductInfo 表包含 reviewed 字段

### 4. 功能检查
- [x] 文件上传功能
- [x] 数据分析功能
- [x] 日期筛选功能
- [x] 导出周报功能
- [x] 导出上周周报功能
- [x] 商品分类统计（含抖音、天猫、有赞三列）

## 服务器信息准备

### 5. 服务器基本信息
- [ ] 服务器 IP: ________________
- [ ] 服务器用户名: ________________
- [ ] 服务器密码/密钥: ________________
- [ ] SSH 端口: ________________ (默认 22)

### 6. 服务器环境
- [ ] 操作系统版本: ________________
- [ ] Python 3 版本: ________________
- [ ] 是否已安装 pip: ________________
- [ ] 磁盘空间: ________________
- [ ] 内存大小: ________________

### 7. 网络配置
- [ ] 域名（如有）: ________________
- [ ] 是否需要配置 HTTPS: ________________
- [ ] 防火墙端口: ________________
- [ ] Nginx 是否已安装: ________________

## 部署准备

### 8. 文件传输方式
- [ ] 选择传输方式:
  - [ ] SCP/SFTP
  - [ ] FTP
  - [ ] Git Clone
  - [ ] 其他: ________________

### 9. 部署配置
- [ ] 应用端口: 5001
- [ ] 是否使用 Nginx 反向代理: ________________
- [ ] 是否配置 Systemd 服务: ________________
- [ ] 是否配置 HTTPS: ________________

### 10. 安全配置
- [ ] Flask SECRET_KEY: ________________
- [ ] 数据库文件权限设置
- [ ] 日志文件权限设置
- [ ] 上传文件大小限制

## 部署后验证

### 11. 功能验证
- [ ] 主页能正常访问
- [ ] 文件上传功能正常
- [ ] 数据分析功能正常
- [ ] 日期筛选功能正常
- [ ] 导出周报功能正常
- [ ] 所有 API 接口正常

### 12. 性能验证
- [ ] 页面加载速度正常
- [ ] 文件上传速度正常
- [ ] 数据查询速度正常
- [ ] 内存使用正常
- [ ] CPU 使用正常

## 备份和恢复

### 13. 备份计划
- [ ] 数据库定期备份
- [ ] 上传文件备份
- [ ] 配置文件备份
- [ ] 日志文件备份

### 14. 恢复计划
- [ ] 数据库恢复步骤
- [ ] 应用恢复步骤
- [ ] 配置恢复步骤

## 监控和维护

### 15. 监控配置
- [ ] 应用日志监控
- [ ] 错误日志监控
- [ ] 性能监控
- [ ] 资源使用监控

### 16. 维护计划
- [ ] 定期更新依赖
- [ ] 定期备份数据
- [ ] 定期检查日志
- [ ] 定期更新代码

## 应急预案

### 17. 常见问题处理
- [ ] 应用无法启动
- [ ] 数据库连接失败
- [ ] 文件上传失败
- [ ] 端口被占用
- [ ] 内存不足

### 18. 联系信息
- [ ] 技术支持: ________________
- [ ] 运维人员: ________________
- [ ] 紧急联系: ________________

---

## 快速开始

### 本地打包
```bash
bash package_for_deploy.sh
```

### 上传到服务器
```bash
scp rongzao-server-*.tar.gz user@server:/tmp/
```

### 服务器部署
```bash
cd /path/to/deploy
tar -xzf /tmp/rongzao-server-*.tar.gz
cd rongzao-server-*
bash check_env.sh
bash deploy.sh
```

### 访问应用
```
http://your-server-ip:5001
```

---

## 注意事项

1. **数据库文件**: rongzao.db 包含所有数据，请确保安全传输
2. **密钥配置**: 生产环境必须设置 SECRET_KEY
3. **端口配置**: 确保防火墙开放相应端口
4. **文件权限**: 正确设置文件和目录权限
5. **日志监控**: 定期检查日志文件，及时发现问题

---

## 支持和帮助

如有问题，请查看:
- DEPLOYMENT.md - 详细部署文档
- logs/app.log - 应用日志
- check_env.sh - 环境检查工具